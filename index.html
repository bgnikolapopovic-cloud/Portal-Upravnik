<!DOCTYPE html>
<html lang="sr-Latn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Portal Upravnik</title>

<!-- Preload important assets -->
<link rel="preload" href="/bg.png" as="image">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --bg-url: url("bg.png");
  --sidebar-w: min(340px, 50vw);
  --edge-w: 28px; /* hotspot width */
  --main-pad: 18px;
  --ink:#0f172a;
  --muted:rgba(15,23,42,.65);
  --glass:rgba(248,250,252,.92);
  --border:rgba(15,23,42,.14);
  --shadow:0 18px 40px rgba(2,6,23,.10);
  --side1:rgba(10,35,56,.92);
  --side2:rgba(6,24,40,.92);
}
@media(min-width:900px){ :root{ --main-pad: 52px; } }

*{margin:0;padding:0;box-sizing:border-box;font-family:"Inter",system-ui,Arial,sans-serif}

body{
  min-height:100vh;
  background: var(--bg-url) center/cover no-repeat;
  color: var(--ink);
  overflow-x:hidden;
}
/* enable fixed background only for larger screens to avoid mobile perf issues */
@media(min-width:900px){ body{ background-attachment: fixed; } }

body::before{
  content:"";
  position:fixed; inset:0;
  background: rgba(255,255,255,.22);
  backdrop-filter: blur(1.4px);
  filter: contrast(1.35) saturate(1.25);
  z-index:-2;
}

/* ambient blobs */
.ambient{ position:fixed; inset:-20%; z-index:-1; pointer-events:none; background:
  radial-gradient(600px 380px at 18% 22%, rgba(59,130,246,.22), transparent 60%),
  radial-gradient(620px 420px at 82% 26%, rgba(14,165,233,.18), transparent 60%),
  radial-gradient(720px 520px at 50% 84%, rgba(15,23,42,.12), transparent 62%);
  filter: blur(2px);
}

/* TOP RIGHT */
.topRightBar{
  position:absolute;
  top:calc(10px + env(safe-area-inset-top));
  right:calc(var(--main-pad) + env(safe-area-inset-right));
  display:flex; align-items:center; gap:12px; z-index:95;
  pointer-events:auto; /* allow interactions inside */
}
.topRightTitle{ text-align:left; font-weight:900; line-height:1.05; }
.topRightTitle span{ display:block; font-size:18px; }
.topRightLogo{ padding:6px; background:rgba(255,255,255,.72); border:1px solid var(--border); border-radius:22px; box-shadow:var(--shadow); }
.topRightLogo img{ height:56px; width:auto; display:block; border-radius:16px; }
@media(min-width:900px){ .topRightTitle span{font-size:22px;} .topRightLogo img{height:92px;} }

/* overlay + hover zona (PORTAL) */
.overlay{ position:fixed; inset:0; background:rgba(2,6,23,.25); opacity:0; pointer-events:none; transition:.2s; z-index:40; }
.overlay.show{ opacity:1; pointer-events:auto; }
.edgeHotspot{ position:fixed; left:0; top:0; width:var(--edge-w); height:100vh; z-index:60; }

/* SIDEBAR - use body.sidebar-open for toggling */
.sidebar{ position:fixed; left:0; top:0; width:var(--sidebar-w); height:100vh; padding:16px 20px; background:linear-gradient(180deg,var(--side1),var(--side2)),var(--bg-url); background-size:cover; color:#fff; box-shadow:18px 0 40px rgba(0,0,0,.28); transform:translateX(-100%); transition:.2s; z-index:70; }
body.sidebar-open .sidebar{ transform:translateX(0); filter:none; }
body:not(.sidebar-open) .sidebar{ filter: brightness(1.20); }
.sidebar::before{ content:""; position:absolute; inset:0; background:rgba(0,0,0,.22); backdrop-filter:blur(8px); }
.sidebar>*{ position:relative; z-index:1 }

.brand{ height:92px }
.brand h1{ font-size:24px; font-weight:900; letter-spacing:.16em }
.brand p{ font-size:13px; opacity:.78; margin-top:8px }

.nav{ margin-top:26px; display:flex; flex-direction:column; gap:12px }
.nav a{ padding:16px 18px; border-radius:18px; color:#fff; text-decoration:none; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.14); font-size:19px; font-weight:700; display:block; }
.nav a.active{ background:rgba(255,255,255,.14) }

/* premium statistika styles preserved (copy) */
.nav a[data-page="statistika"]{ position: relative; overflow: hidden; background: linear-gradient(135deg, rgba(59,130,246,.35), rgba(14,165,233,.22)); border: 1px solid rgba(147,197,253,.65); box-shadow: 0 18px 40px rgba(37,99,235,.22), 0 6px 14px rgba(2,6,23,.22); font-weight:900; letter-spacing:.02em; }
.nav a[data-page="statistika"]::before{ content:""; position:absolute; inset:-2px; background: radial-gradient(260px 120px at 15% 25%, rgba(255,255,255,.22), transparent 60%); pointer-events:none; }
.nav a[data-page="statistika"]::after{ content:""; position:absolute; left:10px; top:50%; transform:translateY(-50%); width:6px; height:60%; border-radius:999px; background: linear-gradient(180deg, rgba(191,219,254,.95), rgba(59,130,246,.95)); box-shadow: 0 0 18px rgba(59,130,246,.45); pointer-events:none; }
.nav a[data-page="statistika"]:hover{ transform: translateY(-1px); }
.nav a[data-page="statistika"].active{ /* active look */ }

/* hamburger as button for accessibility */
.hamburger{ position:fixed; left:18px; top:18px; width:56px; height:56px; border-radius:17px; background:var(--glass); border:1px solid var(--border); box-shadow:var(--shadow); display:grid; place-items:center; z-index:80; }

/* ensure hamburger hidden when sidebar open */
body.sidebar-open .hamburger{ opacity: 0; pointer-events: none; }

/* focus-visible & reduced motion */
:focus{ outline:none; }
:focus-visible{ outline: 3px solid rgba(59,130,246,.85); outline-offset:2px; border-radius:8px; }
@media (prefers-reduced-motion: reduce){ *{ animation:none !important; transition:none !important; } }

/* FINANCE PDF color (single declaration, dup removed) */
#financeList .fileList li,
#financeList .fileList li span,
#financeList .fileList li small{ color:#1d4ed8; font-weight:900; }

/* keep the rest of the original styles intact (trimmed here for brevity) */
/* ... many styles from original index.html preserved ... */

</style>
</head>
<body class="mode-login">
<a class="skip-link" href="#maincontent" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">Preskoƒçi na sadr≈æaj</a>

<div class="ambient" aria-hidden="true"></div>

<!-- top right brand -->
<div class="topRightBar">
  <div class="topRightTitle"><span>Portal Upravnik</span></div>
  <a class="topRightLogo" href="/" aria-label="Poƒçetna"><img src="logo.png" alt="Portal Upravnik logo"/></a>
</div>

<!-- overlay for modal/sidebar -->
<div id="overlay" class="overlay" tabindex="-1"></div>

<!-- edge hotspot for swipe/open -->
<button id="edgeHotspot" class="edgeHotspot" aria-hidden="true" title="Otvorite meni"></button>

<!-- hamburger button -->
<button id="menuBtn" class="hamburger" aria-controls="sidebar" aria-expanded="false" aria-label="Otvori meni">
  <!-- simple icon -->
  <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <rect y="1" width="22" height="2" rx="1" fill="#0f172a"/>
    <rect y="6" width="22" height="2" rx="1" fill="#0f172a"/>
    <rect y="11" width="22" height="2" rx="1" fill="#0f172a"/>
  </svg>
</button>

<!-- sidebar (aside) -->
<aside id="sidebar" class="sidebar" aria-hidden="true">
  <div class="brand">
    <h1>Upravnik</h1>
    <p>Dobrodo≈°li</p>
  </div>
  <nav class="nav" aria-label="Glavna navigacija">
    <a href="#" data-page="home" class="active">Poƒçetna</a>
    <a href="#" data-page="statistika">Statistika</a>
    <a href="#" data-page="finansije">Finansije</a>
  </nav>
</aside>

<main id="maincontent" class="main contentWrap" tabindex="0">
  <!-- minimal structure to preserve mode switching -->
  <section id="loginScreen" class="page active">
    <div class="loginWrap">
      <div class="loginCard">
        <div class="loginInner">
          <header class="loginHead">
            <h2 class="formTitle">Prijava</h2>
            <p class="formSub">Unesite va≈°e podatke</p>
          </header>
          <form id="loginForm">
            <div class="field"><label for="email">Email</label><div class="inputWrap"><input id="email" name="email" type="email" required></div></div>
            <div class="field"><label for="password">Lozinka</label><div class="inputWrap"><input id="password" name="password" type="password" required><button type="button" class="eyeBtn" aria-label="Prika≈æi lozinku">üëÅÔ∏è</button></div></div>
            <div class="row btnRow"><button type="submit" class="btn btnPrimary">Prijavi se</button><button type="button" class="btn btnGhost">Pomoƒá</button></div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <section id="portalScreen" class="page" aria-hidden="true">
    <!-- placeholder for portal content -->
    <div class="card"><h3>Portal</h3><p class="smallText">Sadr≈æaj portala</p></div>
  </section>

  <section id="buildingSelectScreen" class="page" aria-hidden="true">
    <div class="card"><h3>Izaberi zgradu</h3></div>
  </section>
</main>

<script>
// Sidebar toggle logic with a11y attributes
(function(){
  const body = document.body;
  const btn = document.getElementById('menuBtn');
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const edge = document.getElementById('edgeHotspot');

  function openSidebar(){
    body.classList.add('sidebar-open');
    sidebar.setAttribute('aria-hidden','false');
    btn.setAttribute('aria-expanded','true');
    overlay.classList.add('show');
  }
  function closeSidebar(){
    body.classList.remove('sidebar-open');
    sidebar.setAttribute('aria-hidden','true');
    btn.setAttribute('aria-expanded','false');
    overlay.classList.remove('show');
    btn.focus();
  }

  btn.addEventListener('click', () => {
    if(body.classList.contains('sidebar-open')) closeSidebar(); else openSidebar();
  });
  overlay.addEventListener('click', closeSidebar);
  edge.addEventListener('click', openSidebar);

  // close on escape
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && body.classList.contains('sidebar-open')) closeSidebar();
  });

  // simple show/hide pages based on body.mode-* classes (keeps original pattern)
  function updatePages(){
    const mode = body.className.split(' ').find(c=>c.startsWith('mode-')) || 'mode-login';
    document.querySelectorAll('.page').forEach(p=>p.style.display='none');
    if(mode==='mode-login') document.getElementById('loginScreen').style.display='block';
    if(mode==='mode-portal') document.getElementById('portalScreen').style.display='block';
    if(mode==='mode-buildingSelect') document.getElementById('buildingSelectScreen').style.display='block';
  }
  updatePages();
  // expose for debugging
  window.__portal = { openSidebar, closeSidebar, updatePages };
})();
</script>

</body>
</html>